<!DOCTYPE html> 
<html> 
    <head> 
        <meta charset="utf-8"> 
        <meta name="viewport" content="width=device-width, maximum-scale=1.0" />

        <title>Lily's Assignment 4!</title> 

        <link href="style.css" media="screen" rel="stylesheet" type="text/css" />

    </head> 
    <body> 
        <div class="header">
            <h1>Lily's Assignment 4!</h1>
            <br>Here is all the documentation for assignment 4! <br>
            
            <p>
            <img src="remote.gif" width=400></a>
            </p> 
            This gif shows the operation of my circuit:<br>
            I used a remote sensor and a transistor to be able to control an LED strip's state by pressing buttons 
            on a remote.
            This project uses remote sensing and an N-MOSFET transistor. The purpose of this was to 
            control an LED strip with a higher load than the arduino can support; to use atransistor to control 
            load power separate from logic power.<br>
            <p>
                <img src="small_circuit.jpg" width=400></a>
                </p>
            <p>
            This image shows my circuit, which has  <br> <br> <br>
                <img src="wide_circuit.jpg" width=400></a>
                </p>
            This is the side view of my circuit. <br> <br>
            <p>
                <img src="schematic4.jpg" width=400 class="rotateimg180"></a>
                </p>
            <p>
            Here is my schematic. Lia helped me figure out how to draw the LED strip in my schematic. <br> <br>
                <img src="led_calc4.jpg" width=400 class="rotateimg180"></a>
                </p>
            <br>              
            <p>
            <br> Here is my code for this assignment: <br><br>
                <pre><code>
                    // include IR remote library so I can use my remote
                    #include <IRremote.h>
                    
                    // set a variable equal the pin for the remote sensor
                    const int sensPin = 7;
                    // set variable equal to pin for transistor
                    const int transPin = 10;
                    // sets a key_value for what key has been pressed on the remote
                    unsigned long key_value = 0;
                    
                    // creates an object irrecv
                    IRrecv irrecv(sensPin);
                    //creates a variable to store the results of the button press
                    decode_results results;
                    
                    // this setup code runs once
                    void setup() {
                      // tells arduino to communicate with serial monitor
                      Serial.begin(9600);
                      // enables the remote sensor to "listen" for signals
                      irrecv.enableIRIn();
                    
                      // transistor pin is set as output
                      pinmode(transPin, OUTPUT);
                    }
                    
                    // this code will run in a repeated loop
                    void loop() {
                    
                      // checking to see if a signal has been received from the remote sensor
                      if (irrecv.decode(&results)){
                      
                        // if a code has been recieved, check what it is. 0XFFFFFFFF
                        if (results.value == 0XFFFFFFFF) {
                          // sets the object's value to the last key value 
                          results.value = key_value;
                        }
                        // checks if the button 0 on the remote was pressed
                        if (results.value == 0xFF6897) {
                          // prints "0" in the serial monitor
                          Serial.println("0");
                          // turns LED strip to HIGH
                          analogWrite(transPin, 255);
                        }
                        // checks if the button 1 on the remote was pressed
                        if (results.value == 0xFF30CF) {
                          // prints "1" in the serial monitor
                          Serial.println("1");
                          // turns off LED strip when 0 is pressed
                          analogWrite(transPin, 0);
                          // can't press another button/turn of LED for one second
                          delay(1000);
                        }
                        // checks if the button 2 on the remote was pressed
                        if (results.value == 0xFF18E7) {
                          // prints "2" in the serial monitor
                          Serial.println("2");
                          // for loop that makes the LED incrementally brighter
                          for(int i = 0; i < 256; i++){
                            // turns LED on with variable brightness depending on the loop
                            analogWrite(transPin, i);
                            // delay 10 microseconds between loops
                            delay(10);
                          }     
                        }
                        // checks if the button 3 on the remote was pressed
                        if (results.value == 0xFF7A85) {
                          // prints "3" in the serial monitor
                          Serial.println("3");
                          // loop that makes the LED strip incrementally dimmer
                          for(int i = 255; i >= 0; i--) {
                            // turns LED on with variable brightness depending on the loop
                            analogWrite(transPin, i);
                            // delay 25 microseconds between loops
                            delay(25);
                          }
                        }
                        // checks if the button 4 on the remote was pressed
                        if (results.value == 0xFF10EF) {   
                          // prints "4" in the serial monitor
                          Serial.println("4");
                          // loops through code 5 times
                          for(int i = 0; i < 5; i++) {
                            // wait 1/10 of a second
                            delay(100);
                            // turn LED strip off
                            digitalWrite(transPin, LOW);
                            // wait 1/10 of a second
                            delay(100);
                            // turn LED strip on
                            digitalWrite(transPin, HIGH);
                            // wait 150 microseconds
                            delay(150);
                            // turn LED strip off
                            digitalWrite(transPin, LOW);
                            // wait 150 microseconds
                            delay(150);
                            // turn LED strip on
                            digitalWrite(transPin, HIGH);
                            // wait 200 microseconds
                            delay(200);
                            // turn LED strip off
                            digitalWrite(transPin, LOW);
                            // wait 200 microseconds
                            delay(200);  
                          }   
                        }    
                        // sets key_value to the hex code of last button press
                        key_value = results.value;
                        // resumes so the next remote sensing value can be received (learned from github
                        irrecv.resume();
                      }
                    }
                                    }</code>
            </p>
        </div>
        
    </body>
</html>
